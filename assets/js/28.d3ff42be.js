(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{441:function(e,a,n){"use strict";n.r(a);var t=n(3),r=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Yii框架一定要慎用Dao的delete，一不小心它生不成条件的话，就变成了整表删除。 可以用ActiveRecord的deleteByAttributes或deleteAll方法相对不容易写错。 deleteByAttributes用法如下：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("MyClass::model()->deleteAllByAttributes(array(\n    'phone_number'=>$phoneNumber,\n));\n")])])]),a("p",[e._v("或者第一个参数为空，使用第二个条件参数")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("MyClass::model()->deleteAllByAttributes(array(),'`phone_number` = :phone_number',array(\n    ':phone_number'=>$phoneNumber,\n));\n")])])]),a("p",[e._v("或者使用"),a("code",[e._v("deleteAll()")]),e._v(":")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("MyClass::model()->deleteAll('`phone_number` = :phone_number',array(\n    ':phone_number'=>$phoneNumber,\n));\n")])])]),a("p",[e._v("再来一个带in条件的")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("$condition = new CDbCriteria();\n$condition->addCondition('status=:status');\n$condition->params = array(':status'=>1);\n$condition->addInCondition('user_id',array(100111,100221,100221));\nUser::model()->deleteAll($condition);\n")])])]),a("p",[e._v("Dao带in条件的示例")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("Yii::app()->db->createCommand()\n->delete('mw_user', array('and', 'user_id=:user_id', array('in', 'position_id', array(1,2,3))),array(':user_id'=>121111));\n")])])]),a("p",[e._v("但是请慎用DAO的delete，当你的条件写错一点，它将无法生成where条件，同时sql语句中也没有了where，但还不一定报错，结果就成了没有where的delete，结果会是整表被删除了。")])])}),[],!1,null,null,null);a.default=r.exports}}]);