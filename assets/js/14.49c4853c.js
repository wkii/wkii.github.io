(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{426:function(a,s,e){"use strict";e.r(s);var t=e(3),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"后台-background-运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后台-background-运行"}},[a._v("#")]),a._v(" 后台("),s("em",[a._v("background")]),a._v(")运行")]),a._v(" "),s("p",[a._v("更多的时候，需要让 Docker在后台运行而不是直接把执行命令的结果输出在当前宿主机下。此时，可以通过添加 -d 参数来实现。")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run -d nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("注： 容器是否会长久运行，是和docker run指定的命令有关，和 -d 参数无关。")]),a._v(" "),s("h2",{attrs:{id:"始终自动重启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#始终自动重启"}},[a._v("#")]),a._v(" 始终自动重启")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run -d -restart=always -d nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"终止容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#终止容器"}},[a._v("#")]),a._v(" 终止容器")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker stop id\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"导出镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导出镜像"}},[a._v("#")]),a._v(" 导出镜像")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" save "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" ubuntu.tar.gz ubuntu:latest\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"导入镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导入镜像"}},[a._v("#")]),a._v(" 导入镜像")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo docker load --input centos7.tar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"导出容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导出容器"}},[a._v("#")]),a._v(" 导出容器")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" 7691a814370e "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ubuntu.tar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"导入容器快照"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导入容器快照"}},[a._v("#")]),a._v(" 导入容器快照")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cat ubuntu.tar | sudo docker import - test/ubuntu:v1.0\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("or")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo docker import http://example.com/exampleimage.tgz example/imagerepo\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"删除容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除容器"}},[a._v("#")]),a._v(" 删除容器")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo docker rm trusting_newton\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("删除正在运行的容器可以加参数"),s("code",[a._v("-f")]),a._v("Docker 会发送 "),s("code",[a._v("SIGKILL")]),a._v(" 信号给容器。")]),a._v(" "),s("p",[a._v("##停止container")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("sudo docker stop $(sudo docker ps -a -q)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"清理所有处于终止状态的容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理所有处于终止状态的容器"}},[a._v("#")]),a._v(" 清理所有处于终止状态的容器")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker rm $(docker ps -a -q)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"删除tag值为none的images-清理废弃镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除tag值为none的images-清理废弃镜像"}},[a._v("#")]),a._v(" 删除tag值为none的images(清理废弃镜像）")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('sudo docker rmi $(docker images -a| grep "^<none>" | awk "{print $3}")\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("或者")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker images -a |grep none|awk '{print $3 }'|xargs docker rmi\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("或者")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('docker rmi $(docker images -a -q -f "dangling=true")\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"删除全部images"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除全部images"}},[a._v("#")]),a._v(" 删除全部images")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker rmi $(docker images -q)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"清理过期容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清理过期容器"}},[a._v("#")]),a._v(" 清理过期容器")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker rm $(docker ps -q -f status=exited)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"进入容器看看-php-为容器的名称"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入容器看看-php-为容器的名称"}},[a._v("#")]),a._v(" 进入容器看看, "),s("code",[a._v("php")]),a._v(" 为容器的名称")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('docker exec -it php "/bin/bash"\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h2",{attrs:{id:"打tag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打tag"}},[a._v("#")]),a._v(" 打tag")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 给某一版本打上latest的tag\ndocker tag -f ubuntu:14.04 ubuntu\n\n# 打默认tag，-f 意思是强制覆盖\ndocker tag -f ubuntu:14.04 ubuntu:latest\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);